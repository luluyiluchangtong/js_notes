<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>

  <body>
    <script>
      // 解构赋值的概念： js表达式; 从数组 或 对象中提取 数组值/属性值，“赋值” 给变量。
      // 事实上，只要某种数据结构具有 Iterator 接口，都可以采用 数组形式 的解构赋值

      // 1.数组的解构赋值：  前后顺序有要求
      let [a, b, c] = [1, 2, 3];
      console.log(a); // 1

      let colors = ["red", "green", "blue"];
      let [, , thirdColor] = colors;
      console.log(thirdColor); // "blue"

      // 解构赋值允许指定默认值， 如果一个数组成员 不存在 或 为undefined，默认值生效
      let [x, y = "b"] = [2]; // x=2 y='b'
      let [z, d = "c"] = [2, undefined]; // z=2 d='c'

      // 2.对象的结构赋值：
      // 与数组的解构赋值不同的地方是 对象的 “变量名” 必须和 “属性名” 一样，才能取到正确的值, 前后顺序没有要求
      let { foo, bar, zar } = {
        foo: 11,
        bar: 22,
        zar: 33,
      };
      console.log(foo); // 11
      let { foo1: baz } = {
        foo1: 11,
        bar: 22,
      };
      console.log(baz); // 11
      // 当想要变量名和属性名不一致时，需要按照这样写，即将原本和 属性名 同名的变量 foo1 赋值一个不同名的变量 baz。

      // 所以对象的解构赋值 是下面的简写，实际上是赋值给变量后面的属性！
      let { foo: foo, bar: bar } = {
        foo: "aaa",
        bar: "bbb",
      };
      let node = {
        a: 11,
        b: 22,
      }(({ a, b } = node)); // 对象赋值解构的表达式需要用 圆括号。

      // 对象的结构赋值的 默认值只有在对应属性缺失、或对应的属性值为 undefined 的情况下，该默认值才会被使用

      let {
        a = 2, // 默认值方式
        c: f,
        b,
      } = {
        c: 89,
        b: 45,
      };
      console.log(a); // 解构赋值 对象的默认值 a
      console.log(f);

      // {a, b} = {a: 1, b: 2} 不是有效的独立语法
      // ({a, b} = {a: 1, b: 2}) 是有效的

      // 3.字符串的解构赋值：
      // 此时字符串被转换为类数组对象
      const [a, b, c, d, e] = "hello"; // a='h' b='e' .... e='O'

      // 数值和布尔值的解构赋值：
      let { toString: s } = 123;
      s === Number.prototype.toString; // 会自动将右边的转换为对象，然后进行结构赋值

      // 函数参数的解构赋值：
      // 数组作参数
      function box([a, b]) {
        return a + b;
      }
      box([2, 3]) // 5
        [([1, 2], [3, 4])].map(([a, b]) => a + b); // 3,7

      // 对象作参数
      function Fn({ a, b, c }) {
        return a + b + c;
      }
      Fn({ a: 33, b: 4, c: 46 });
      console.log(Fn({ a: 33, b: 4, c: 46 }));

      // 函数解构赋值 默认值规则同上:
      let { x = 99, y } = {
        undefined,
        y: 89,
      };
      console.log(x, y);

      // 嵌套解构？？？
    </script>
  </body>
</html>
