<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/tachyons.css">
    <script src="../js/jquery-3.1.js"></script>
    <title>Document</title>
</head>

<body class="relative">
    <div id="div1" class=" ba absolute bg-red" style=" width:100px; height:100px;">div1</div>
    <div class=" pt7">
        <button id="start">start</button>
        <button id="stop">stop</button>
    </div>
    <div class="box">
        <div class="ball"></div>
    </div>
    <style>
        .box {
            width: 800px;
            height: 600px;
            border: 1px solid;
            position: relative;
        }

        .ball {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: red;
            position: absolute;
        }
    </style>
    <script>
        // requestAnimationFrame()方法告诉浏览器您希望执行动画，并请求浏览器调用指定的函数在下一次重绘之前更新动画, 回调函数会在浏览器重绘之前调用
        // setTimeout 和 setInterval 里回调等待执行的时间是由前面的任务队列决定的，而 requestAnimationFrame采用系统时间间隔
        // 显示器有固定的刷新频率（60Hz或75Hz），也就是说，每秒最多只能重绘60次或75次，
        // requestAnimationFrame的基本思想就是与这个刷新频率保持同步，利用这个刷新频率进行页面重绘。。
        // requestAnimationFrame使用一个回调函数作为参数。这个回调函数会在浏览器重绘之前调用（每秒60次）
        let div1 = document.getElementById("div1");
        let start = document.getElementById("start");
        let stop = document.getElementById("stop");

        var animate;
        var lf = div1.style.left = 0;
        // var lfdata = parseInt(lf)
        function box() {
            lf += 2;
            if (lf > 1000) {
                lf = 500
            }
            div1.style.left = lf + 'px';
            animate = requestAnimationFrame(box)
        }
        start.onclick = function () {
            box()
        }
        stop.onclick = function () {
            cancelAnimationFrame(animate)
        }


        // 例子2：
        var ball = document.querySelector(".ball");
        var i = 0;

        function move() {
            if (i == 750) {
                i = 0;
            } else {
                i += 3;
            }
            //console.log(i)
            ball.style.cssText = "left: " + i + "px";
            requestAnimationFrame(move);
        }
        move();
    </script>
</body>

</html>